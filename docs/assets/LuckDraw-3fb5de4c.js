import{d as L,r as f,v as _,a as N,f as $,n as A,ab as C,R as i,S as n,a6 as x,a9 as w,ac as M,W as l,ad as h,T as g,ae as R,af as V}from"./index-83ec3282.js";import{s as F}from"./function-call-fed3c7eb.js";import"./use-expose-25a6b7b7.js";import"./index-48bbdba0.js";const J=L({name:"LuckDraw",setup(){let s=0,r,e=0,a=!1;const o=f(!1),u=f(0),v=_([{phone:"186****2336抽中0元话费"},{phone:"166****2336抽中1元话费"},{phone:"156****2336抽中2元话费"}]),b=_([{id:1,runId:0,name:"潘多拉音箱"},{id:2,runId:1,name:"小酷M1耳机"},{id:3,runId:2,name:"酷狗VIP会员"},{id:4,runId:7,name:"8元话费"},{id:5,runId:3,name:"12元话费"},{id:6,runId:6,name:"谢谢参与1"},{id:7,runId:5,name:"4元话费"},{id:8,runId:4,name:"谢谢参与2"}]),S=N(()=>{const d=JSON.parse(JSON.stringify(b));return d.splice(4,0,{name:"drawBtn"}),d}),T=()=>{o.value=!0,setTimeout(()=>{v.push(v[0]),v.shift(),o.value=!1},500)},y=()=>{const d=setTimeout(()=>{if(u.value++,u.value>7&&(u.value=0),r!=null&&r.id&&(Date.now()-e)/1e3>2.5){if(console.log("奖品出来了"),s+=20,(Date.now()-e)/1e3>5&&r.runId===u.value){clearTimeout(d),setTimeout(()=>{a=!1;const t=b.find(p=>p.id===r.id);t&&(console.log(`您抽中的奖品是${t.name},奖品id是${t.id}`),F(`您抽中的奖品是${t.name}`))},400);return}}else s>=50&&(s-=20);y()},s)},B=()=>{setTimeout(()=>{const d=Math.ceil(Math.random()*8),t=b.find(p=>p.id===d);t&&(r=t),console.log("返回的抽奖结果是",r)},2e3),y()},D=()=>{if(a){console.log("正在抽奖中...");return}if(isNaN(200))return!1;s=200,a=!0,e=Date.now(),B(),console.log("开始抽奖")};return $(async()=>{await A(),setInterval(T,2e3)}),{awards:b,awardList:S,animate:o,list:v,current:u,handleStart:D}}});const O=c=>(R("data-v-ccbc704e"),c=c(),V(),c),q={class:"luckdraw-content"},z={class:"luckdraw-scroll"},E={class:"bg-scroll"},P={class:"lkq-name"},W={class:"turntable"},j=M('<svg class="bulb svelte-ecndpu" viewBox="-6 -6 316 316" fill="currentColor" fill-rule="evenodd" data-v-ccbc704e><g class="bulb-1 svelte-ecndpu" data-v-ccbc704e><circle cx="10" cy="10" r="4" data-v-ccbc704e></circle><circle cx="78" cy="4" r="4" data-v-ccbc704e></circle><circle cx="152" cy="4" r="4" data-v-ccbc704e></circle><circle cx="226" cy="4" r="4" data-v-ccbc704e></circle><circle cx="294" cy="10" r="4" data-v-ccbc704e></circle><circle cx="4" cy="89" r="4" data-v-ccbc704e></circle><circle cx="4" cy="173" r="4" data-v-ccbc704e></circle><circle cx="4" cy="258" r="4" data-v-ccbc704e></circle><circle cx="41" cy="300" r="4" data-v-ccbc704e></circle><circle cx="115" cy="300" r="4" data-v-ccbc704e></circle><circle cx="189" cy="300" r="4" data-v-ccbc704e></circle><circle cx="263" cy="300" r="4" data-v-ccbc704e></circle><circle cx="300" cy="258" r="4" data-v-ccbc704e></circle><circle cx="300" cy="173" r="4" data-v-ccbc704e></circle><circle cx="300" cy="89" r="4" data-v-ccbc704e></circle></g><g class="bulb-2 svelte-ecndpu" data-v-ccbc704e><circle cx="41" cy="4" r="4" data-v-ccbc704e></circle><circle cx="115" cy="4" r="4" data-v-ccbc704e></circle><circle cx="189" cy="4" r="4" data-v-ccbc704e></circle><circle cx="263" cy="4" r="4" data-v-ccbc704e></circle><circle cx="4" cy="46" r="4" data-v-ccbc704e></circle><circle cx="4" cy="131" r="4" data-v-ccbc704e></circle><circle cx="4" cy="215" r="4" data-v-ccbc704e></circle><circle cx="10" cy="294" r="4" data-v-ccbc704e></circle><circle cx="294" cy="294" r="4" data-v-ccbc704e></circle><circle cx="300" cy="215" r="4" data-v-ccbc704e></circle><circle cx="300" cy="131" r="4" data-v-ccbc704e></circle><circle cx="300" cy="46" r="4" data-v-ccbc704e></circle><circle cx="78" cy="300" r="4" data-v-ccbc704e></circle><circle cx="152" cy="300" r="4" data-v-ccbc704e></circle><circle cx="226" cy="300" r="4" data-v-ccbc704e></circle></g></svg>',1),G={class:"awards-list"},H=O(()=>n("span",{class:"draw-btn-text"},"点击抽奖",-1)),K=[H],Q={key:1};function U(c,m,I,k,s,r){return l(),i("div",q,[n("div",z,[n("ul",E,[(l(!0),i(x,null,w(c.list,(e,a)=>(l(),i("li",{key:a,class:h({anim:c.animate&&a==0})},[n("span",P,g(e.phone),1)],2))),128))])]),n("div",W,[j,n("ul",G,[(l(!0),i(x,null,w(c.awardList,(e,a)=>(l(),i("li",{key:e.id,class:h(["awards-item",{"awards-item-draw":a===4,"run-item":e.runId===c.current}])},[a===4?(l(),i("div",{key:0,onClick:m[0]||(m[0]=(...o)=>c.handleStart&&c.handleStart(...o)),class:"draw-btn svelte-ecndpu"},K)):(l(),i("div",Q,g(e.name),1))],2))),128))])])])}const ec=C(J,[["render",U],["__scopeId","data-v-ccbc704e"]]);export{ec as default};
