import{c as ve,d as de,r as V,g as Je,a as ee,b as ge,i as Re,w as oe,e as De,o as xe,f as Ce,n as pe,h as d,j as G,t as N,m as X,k as Be,l as qe,p as ie,I as ae,q as Pe,s as J,u as ce,v as Me,x as Ke,y as we,z as le,L as Qe,A as Ue,B as ne,C as Ie,D as et,E as tt,F as ue,G as nt,H as ot,J as Ye,K as Fe,M as at,N as He,O as it,P as st,Q as rt,R as Te,S as te,T as lt,U as ye,V as $e,W as ct,X as ke}from"./index.js";import{C as ut}from"./index3.js";import"./index4.js";import{F as dt}from"./index5.js";import{s as ft,S as mt,a as vt}from"./index6.js";import{N as ht}from"./index7.js";import{m as Ve,u as Ee,a as gt,P as wt,s as Oe}from"./function-call.js";import{u as Ne}from"./use-expose.js";import{L as Ze}from"./index8.js";import{B as yt}from"./index9.js";const[$t,K]=ve("image"),bt={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:G,height:G,radius:G,lazyLoad:Boolean,iconSize:G,showError:N,errorIcon:X("photo-fail"),iconPrefix:String,showLoading:N,loadingIcon:X("photo")};var pt=de({name:$t,props:bt,emits:["load","error"],setup(e,{emit:l,slots:f}){const t=V(!1),c=V(!0),S=V(),{$Lazyload:I}=Je().proxy,k=ee(()=>{const w={width:ge(e.width),height:ge(e.height)};return Re(e.radius)&&(w.overflow="hidden",w.borderRadius=ge(e.radius)),w});oe(()=>e.src,()=>{t.value=!1,c.value=!0});const x=w=>{c.value&&(c.value=!1,l("load",w))},v=()=>{const w=new Event("load");Object.defineProperty(w,"target",{value:S.value,enumerable:!0}),x(w)},C=w=>{t.value=!0,c.value=!1,l("error",w)},_=(w,Y,p)=>p?p():d(ae,{name:w,size:e.iconSize,class:Y,classPrefix:e.iconPrefix},null),O=()=>{if(c.value&&e.showLoading)return d("div",{class:K("loading")},[_(e.loadingIcon,K("loading-icon"),f.loading)]);if(t.value&&e.showError)return d("div",{class:K("error")},[_(e.errorIcon,K("error-icon"),f.error)])},T=()=>{if(t.value||!e.src)return;const w={alt:e.alt,class:K("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?Be(d("img",ie({ref:S},w),null),[[qe("lazy"),e.src]]):d("img",ie({ref:S,src:e.src,onLoad:x,onError:C},w),null)},z=({el:w})=>{const Y=()=>{w===S.value&&c.value&&v()};S.value?Y():pe(Y)},A=({el:w})=>{w===S.value&&!t.value&&C()};return I&&De&&(I.$on("loaded",z),I.$on("error",A),xe(()=>{I.$off("loaded",z),I.$off("error",A)})),Ce(()=>{pe(()=>{var w;(w=S.value)!=null&&w.complete&&!e.lazyLoad&&v()})}),()=>{var w;return d("div",{class:K({round:e.round,block:e.block}),style:k.value},[T(),O(),(w=f.default)==null?void 0:w.call(f)])}}});const We=Pe(pt);let Se;const St={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let _t=J({},St);function Dt(){({instance:Se}=Ve({setup(){const{state:l,toggle:f}=Ee();return()=>d(ft,ie(l,{"onUpdate:show":f}),null)}}))}function xt(e){return De?new Promise((l,f)=>{Se||Dt(),Se.open(J({},_t,e,{callback:t=>{(t==="confirm"?l:f)(t)}}))}):Promise.resolve()}const Ct=e=>xt(J({showCancelButton:!0},e)),Le=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),be=ve("image-preview")[1];var Pt=de({props:{src:String,show:Boolean,active:Number,minZoom:ce(G),maxZoom:ce(G),rootWidth:ce(Number),rootHeight:ce(Number),disableZoom:Boolean},emits:["scale","close","longPress"],setup(e,{emit:l,slots:f}){const t=Me({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}),c=gt(),S=V(),I=ee(()=>{const{rootWidth:o,rootHeight:$}=e,M=$/o;return t.imageRatio>M}),k=ee(()=>{const{scale:o,moveX:$,moveY:M,moving:r,zooming:i}=t,a={transitionDuration:i||r?"0s":".3s"};if(o!==1){const m=$/o,s=M/o;a.transform=`scale(${o}, ${o}) translate(${m}px, ${s}px)`}return a}),x=ee(()=>{if(t.imageRatio){const{rootWidth:o,rootHeight:$}=e,M=I.value?$/t.imageRatio:o;return Math.max(0,(t.scale*M-o)/2)}return 0}),v=ee(()=>{if(t.imageRatio){const{rootWidth:o,rootHeight:$}=e,M=I.value?$:o*t.imageRatio;return Math.max(0,(t.scale*M-$)/2)}return 0}),C=o=>{o=le(o,+e.minZoom,+e.maxZoom+1),o!==t.scale&&(t.scale=o,l("scale",{scale:o,index:e.active}))},_=()=>{C(1),t.moveX=0,t.moveY=0},O=()=>{const o=t.scale>1?1:2;C(o),t.moveX=0,t.moveY=0};let T,z,A,w,Y,p,F,n=!1;const u=o=>{const{touches:$}=o;if(T=$.length,T===2&&e.disableZoom)return;const{offsetX:M}=c;c.start(o),z=t.moveX,A=t.moveY,F=Date.now(),n=!1,t.moving=T===1&&t.scale!==1,t.zooming=T===2&&!M.value,t.zooming&&(w=t.scale,Y=Le(o.touches))},y=o=>{const{touches:$}=o;if(c.move(o),t.moving){const{deltaX:M,deltaY:r}=c,i=M.value+z,a=r.value+A;if((i>x.value||i<-x.value)&&!n&&c.isHorizontal()){t.moving=!1;return}n=!0,we(o,!0),t.moveX=le(i,-x.value,x.value),t.moveY=le(a,-v.value,v.value)}if(t.zooming&&(we(o,!0),$.length===2)){const M=Le($),r=w*M/Y;C(r)}},b=()=>{if(T>1)return;const{offsetX:o,offsetY:$}=c,M=Date.now()-F,r=250,i=5;o.value<i&&$.value<i&&(M<r?p?(clearTimeout(p),p=null,O()):p=setTimeout(()=>{l("close"),p=null},r):M>Qe&&l("longPress"))},B=o=>{let $=!1;if((t.moving||t.zooming)&&($=!0,t.moving&&z===t.moveX&&A===t.moveY&&($=!1),!o.touches.length)){t.zooming&&(t.moveX=le(t.moveX,-x.value,x.value),t.moveY=le(t.moveY,-v.value,v.value),t.zooming=!1),t.moving=!1,z=0,A=0,w=1,t.scale<1&&_();const M=+e.maxZoom;t.scale>M&&(t.scale=M)}we(o,$),b(),c.reset()},D=o=>{const{naturalWidth:$,naturalHeight:M}=o.target;t.imageRatio=M/$};return oe(()=>e.active,_),oe(()=>e.show,o=>{o||_()}),Ke("touchmove",y,{target:ee(()=>{var o;return(o=S.value)==null?void 0:o.$el})}),()=>{const o={loading:()=>d(Ze,{type:"spinner"},null)};return d(mt,{ref:S,class:be("swipe-item"),onTouchstartPassive:u,onTouchend:B,onTouchcancel:B},{default:()=>[f.image?d("div",{class:be("image-wrap")},[f.image({src:e.src})]):d(We,{src:e.src,fit:"contain",class:be("image",{vertical:I.value}),style:k.value,onLoad:D},o)]})}}});const[Mt,Q]=ve("image-preview"),It=["show","teleport","transition","overlayStyle","closeOnPopstate"],Tt={show:Boolean,loop:N,images:Ue(),minZoom:ne(1/3),maxZoom:ne(3),overlay:N,closeable:Boolean,showIndex:N,className:Ie,closeIcon:X("clear"),transition:String,beforeClose:Function,overlayClass:Ie,overlayStyle:Object,swipeDuration:ne(300),startPosition:ne(0),showIndicators:Boolean,closeOnPopstate:N,closeIconPosition:X("top-right"),teleport:[String,Object]};var je=de({name:Mt,props:Tt,emits:["scale","close","closed","change","longPress","update:show"],setup(e,{emit:l,slots:f}){const t=V(),c=Me({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),S=()=>{if(t.value){const p=nt(t.value.$el);c.rootWidth=p.width,c.rootHeight=p.height,t.value.resize()}},I=p=>l("scale",p),k=p=>l("update:show",p),x=()=>{Ye(e.beforeClose,{args:[c.active],done:()=>k(!1)})},v=p=>{p!==c.active&&(c.active=p,l("change",p))},C=()=>{if(e.showIndex)return d("div",{class:Q("index")},[f.index?f.index({index:c.active}):`${c.active+1} / ${e.images.length}`])},_=()=>{if(f.cover)return d("div",{class:Q("cover")},[f.cover()])},O=()=>{c.disableZoom=!0},T=()=>{c.disableZoom=!1},z=()=>d(vt,{ref:t,lazyRender:!0,loop:e.loop,class:Q("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:v,onDragEnd:T,onDragStart:O},{default:()=>[e.images.map((p,F)=>d(Pt,{src:p,show:e.show,active:c.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:c.rootWidth,rootHeight:c.rootHeight,disableZoom:c.disableZoom,onScale:I,onClose:x,onLongPress:()=>l("longPress",{index:F})},{image:f.image}))]}),A=()=>{if(e.closeable)return d(ae,{role:"button",name:e.closeIcon,class:[Q("close-icon",e.closeIconPosition),ot],onClick:x},null)},w=()=>l("closed"),Y=(p,F)=>{var n;return(n=t.value)==null?void 0:n.swipeTo(p,F)};return Ne({swipeTo:Y}),Ce(S),oe([et,tt],S),oe(()=>e.startPosition,p=>v(+p)),oe(()=>e.show,p=>{const{images:F,startPosition:n}=e;p?(v(+n),pe(()=>{S(),Y(+n,{immediate:!0})})):l("close",{index:c.active,url:F[c.active]})}),()=>d(wt,ie({class:[Q(),e.className],overlayClass:[Q("overlay"),e.overlayClass],onClosed:w,"onUpdate:show":k},ue(e,It)),{default:()=>[A(),z(),C(),_()]})}});let me;const kt={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"};function Ot(){({instance:me}=Ve({setup(){const{state:e,toggle:l}=Ee(),f=()=>{e.images=[]};return()=>d(je,ie(e,{onClosed:f,"onUpdate:show":l}),null)}}))}const Lt=(e,l=0)=>{if(De)return me||Ot(),e=Array.isArray(e)?{images:e,startPosition:l}:e,me.open(J({},kt,e)),me};Pe(je);const[At,U,zt]=ve("uploader");function Ae(e,l){return new Promise(f=>{if(l==="file"){f();return}const t=new FileReader;t.onload=c=>{f(c.target.result)},l==="dataUrl"?t.readAsDataURL(e):l==="text"&&t.readAsText(e)})}function Xe(e,l){return Fe(e).some(f=>f.file?at(l)?l(f.file):f.file.size>+l:!1)}function Rt(e,l){const f=[],t=[];return e.forEach(c=>{Xe(c,l)?t.push(c):f.push(c)}),{valid:f,invalid:t}}const Bt=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,Ut=e=>Bt.test(e);function Ge(e){return e.isImage?!0:e.file&&e.file.type?e.file.type.indexOf("image")===0:e.url?Ut(e.url):typeof e.content=="string"?e.content.indexOf("data:image")===0:!1}var Yt=de({props:{name:G,item:ce(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview"],setup(e,{emit:l,slots:f}){const t=()=>{const{status:v,message:C}=e.item;if(v==="uploading"||v==="failed"){const _=v==="failed"?d(ae,{name:"close",class:U("mask-icon")},null):d(Ze,{class:U("loading")},null),O=Re(C)&&C!=="";return d("div",{class:U("mask")},[_,O&&d("div",{class:U("mask-message")},[C])])}},c=v=>{const{name:C,item:_,index:O,beforeDelete:T}=e;v.stopPropagation(),Ye(T,{args:[_,{name:C,index:O}],done:()=>l("delete")})},S=()=>l("preview"),I=()=>{if(e.deletable&&e.item.status!=="uploading"){const v=f["preview-delete"];return d("div",{role:"button",class:U("preview-delete",{shadow:!v}),tabindex:0,"aria-label":zt("delete"),onClick:c},[v?v():d(ae,{name:"cross",class:U("preview-delete-icon")},null)])}},k=()=>{if(f["preview-cover"]){const{index:v,item:C}=e;return d("div",{class:U("preview-cover")},[f["preview-cover"](J({index:v},C))])}},x=()=>{const{item:v,lazyLoad:C,imageFit:_,previewSize:O}=e;return Ge(v)?d(We,{fit:_,src:v.content||v.url,class:U("preview-image"),width:Array.isArray(O)?O[0]:O,height:Array.isArray(O)?O[1]:O,lazyLoad:C,onClick:S},{default:k}):d("div",{class:U("file"),style:He(e.previewSize)},[d(ae,{class:U("file-icon"),name:"description"},null),d("div",{class:[U("file-name"),"van-ellipsis"]},[v.file?v.file.name:v.url]),k()])};return()=>d("div",{class:U("preview")},[x(),t(),I()])}});const Ft={name:ne(""),accept:X("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:ne(1/0),imageFit:X("cover"),resultType:X("dataUrl"),uploadIcon:X("photograph"),uploadText:String,deletable:N,afterRead:Function,showUpload:N,modelValue:Ue(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:N,previewOptions:Object,previewFullImage:N,maxSize:{type:[Number,String,Function],default:1/0}};var Ht=de({name:At,props:Ft,emits:["delete","oversize","clickUpload","closePreview","clickPreview","update:modelValue"],setup(e,{emit:l,slots:f}){const t=V(),c=[],S=(n=e.modelValue.length)=>({name:e.name,index:n}),I=()=>{t.value&&(t.value.value="")},k=n=>{if(I(),Xe(n,e.maxSize))if(Array.isArray(n)){const u=Rt(n,e.maxSize);if(n=u.valid,l("oversize",u.invalid,S()),!n.length)return}else{l("oversize",n,S());return}n=Me(n),l("update:modelValue",[...e.modelValue,...Fe(n)]),e.afterRead&&e.afterRead(n,S())},x=n=>{const{maxCount:u,modelValue:y,resultType:b}=e;if(Array.isArray(n)){const B=+u-y.length;n.length>B&&(n=n.slice(0,B)),Promise.all(n.map(D=>Ae(D,b))).then(D=>{const o=n.map(($,M)=>{const r={file:$,status:"",message:""};return D[M]&&(r.content=D[M]),r});k(o)})}else Ae(n,b).then(B=>{const D={file:n,status:"",message:""};B&&(D.content=B),k(D)})},v=n=>{const{files:u}=n.target;if(e.disabled||!u||!u.length)return;const y=u.length===1?u[0]:[].slice.call(u);if(e.beforeRead){const b=e.beforeRead(y,S());if(!b){I();return}if(rt(b)){b.then(B=>{x(B||y)}).catch(I);return}}x(y)};let C;const _=()=>l("closePreview"),O=n=>{if(e.previewFullImage){const u=e.modelValue.filter(Ge),y=u.map(b=>(b.file&&!b.url&&b.status!=="failed"&&(b.url=URL.createObjectURL(b.file),c.push(b.url)),b.url)).filter(Boolean);C=Lt(J({images:y,startPosition:u.indexOf(n),onClose:_},e.previewOptions))}},T=()=>{C&&C.close()},z=(n,u)=>{const y=e.modelValue.slice(0);y.splice(u,1),l("update:modelValue",y),l("delete",n,S(u))},A=(n,u)=>{const y=["imageFit","deletable","previewSize","beforeDelete"],b=J(ue(e,y),ue(n,y,!0));return d(Yt,ie({item:n,index:u,onClick:()=>l("clickPreview",n,S(u)),onDelete:()=>z(n,u),onPreview:()=>O(n)},ue(e,["name","lazyLoad"]),b),ue(f,["preview-cover","preview-delete"]))},w=()=>{if(e.previewImage)return e.modelValue.map(A)},Y=n=>l("clickUpload",n),p=()=>{if(e.modelValue.length>=+e.maxCount)return;const n=e.readonly?null:d("input",{ref:t,type:"file",class:U("input"),accept:e.accept,capture:e.capture,multiple:e.multiple,disabled:e.disabled,onChange:v},null);return f.default?d("div",{class:U("input-wrapper"),onClick:Y},[f.default(),n]):Be(d("div",{class:U("upload",{readonly:e.readonly}),style:He(e.previewSize),onClick:Y},[d(ae,{name:e.uploadIcon,class:U("upload-icon")},null),e.uploadText&&d("span",{class:U("upload-text")},[e.uploadText]),n]),[[st,e.showUpload]])},F=()=>{t.value&&!e.disabled&&t.value.click()};return xe(()=>{c.forEach(n=>URL.revokeObjectURL(n))}),Ne({chooseFile:F,closeImagePreview:T}),it(()=>e.modelValue),()=>d("div",{class:U()},[d("div",{class:U("wrapper",{disabled:e.disabled})},[w(),p()])])}});const Vt=Pe(Ht);var Et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_e={},Nt={get exports(){return _e},set exports(e){_e=e}};(function(e,l){(function(f,t){e.exports=t()})(Et,function(){var f=1e3,t=6e4,c=36e5,S="millisecond",I="second",k="minute",x="hour",v="day",C="week",_="month",O="quarter",T="year",z="date",A="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(r){var i=["th","st","nd","rd"],a=r%100;return"["+r+(i[(a-20)%10]||i[a]||i[0])+"]"}},F=function(r,i,a){var m=String(r);return!m||m.length>=i?r:""+Array(i+1-m.length).join(a)+r},n={s:F,z:function(r){var i=-r.utcOffset(),a=Math.abs(i),m=Math.floor(a/60),s=a%60;return(i<=0?"+":"-")+F(m,2,"0")+":"+F(s,2,"0")},m:function r(i,a){if(i.date()<a.date())return-r(a,i);var m=12*(a.year()-i.year())+(a.month()-i.month()),s=i.clone().add(m,_),g=a-s<0,h=i.clone().add(m+(g?-1:1),_);return+(-(m+(a-s)/(g?s-h:h-s))||0)},a:function(r){return r<0?Math.ceil(r)||0:Math.floor(r)},p:function(r){return{M:_,y:T,w:C,d:v,D:z,h:x,m:k,s:I,ms:S,Q:O}[r]||String(r||"").toLowerCase().replace(/s$/,"")},u:function(r){return r===void 0}},u="en",y={};y[u]=p;var b=function(r){return r instanceof $},B=function r(i,a,m){var s;if(!i)return u;if(typeof i=="string"){var g=i.toLowerCase();y[g]&&(s=g),a&&(y[g]=a,s=g);var h=i.split("-");if(!s&&h.length>1)return r(h[0])}else{var P=i.name;y[P]=i,s=P}return!m&&s&&(u=s),s||!m&&u},D=function(r,i){if(b(r))return r.clone();var a=typeof i=="object"?i:{};return a.date=r,a.args=arguments,new $(a)},o=n;o.l=B,o.i=b,o.w=function(r,i){return D(r,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var $=function(){function r(a){this.$L=B(a.locale,null,!0),this.parse(a)}var i=r.prototype;return i.parse=function(a){this.$d=function(m){var s=m.date,g=m.utc;if(s===null)return new Date(NaN);if(o.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var h=s.match(w);if(h){var P=h[2]-1||0,R=(h[7]||"0").substring(0,3);return g?new Date(Date.UTC(h[1],P,h[3]||1,h[4]||0,h[5]||0,h[6]||0,R)):new Date(h[1],P,h[3]||1,h[4]||0,h[5]||0,h[6]||0,R)}}return new Date(s)}(a),this.$x=a.x||{},this.init()},i.init=function(){var a=this.$d;this.$y=a.getFullYear(),this.$M=a.getMonth(),this.$D=a.getDate(),this.$W=a.getDay(),this.$H=a.getHours(),this.$m=a.getMinutes(),this.$s=a.getSeconds(),this.$ms=a.getMilliseconds()},i.$utils=function(){return o},i.isValid=function(){return this.$d.toString()!==A},i.isSame=function(a,m){var s=D(a);return this.startOf(m)<=s&&s<=this.endOf(m)},i.isAfter=function(a,m){return D(a)<this.startOf(m)},i.isBefore=function(a,m){return this.endOf(m)<D(a)},i.$g=function(a,m,s){return o.u(a)?this[m]:this.set(s,a)},i.unix=function(){return Math.floor(this.valueOf()/1e3)},i.valueOf=function(){return this.$d.getTime()},i.startOf=function(a,m){var s=this,g=!!o.u(m)||m,h=o.p(a),P=function(q,E){var j=o.w(s.$u?Date.UTC(s.$y,E,q):new Date(s.$y,E,q),s);return g?j:j.endOf(v)},R=function(q,E){return o.w(s.toDate()[q].apply(s.toDate("s"),(g?[0,0,0,0]:[23,59,59,999]).slice(E)),s)},L=this.$W,H=this.$M,W=this.$D,Z="set"+(this.$u?"UTC":"");switch(h){case T:return g?P(1,0):P(31,11);case _:return g?P(1,H):P(0,H+1);case C:var se=this.$locale().weekStart||0,re=(L<se?L+7:L)-se;return P(g?W-re:W+(6-re),H);case v:case z:return R(Z+"Hours",0);case x:return R(Z+"Minutes",1);case k:return R(Z+"Seconds",2);case I:return R(Z+"Milliseconds",3);default:return this.clone()}},i.endOf=function(a){return this.startOf(a,!1)},i.$set=function(a,m){var s,g=o.p(a),h="set"+(this.$u?"UTC":""),P=(s={},s[v]=h+"Date",s[z]=h+"Date",s[_]=h+"Month",s[T]=h+"FullYear",s[x]=h+"Hours",s[k]=h+"Minutes",s[I]=h+"Seconds",s[S]=h+"Milliseconds",s)[g],R=g===v?this.$D+(m-this.$W):m;if(g===_||g===T){var L=this.clone().set(z,1);L.$d[P](R),L.init(),this.$d=L.set(z,Math.min(this.$D,L.daysInMonth())).$d}else P&&this.$d[P](R);return this.init(),this},i.set=function(a,m){return this.clone().$set(a,m)},i.get=function(a){return this[o.p(a)]()},i.add=function(a,m){var s,g=this;a=Number(a);var h=o.p(m),P=function(H){var W=D(g);return o.w(W.date(W.date()+Math.round(H*a)),g)};if(h===_)return this.set(_,this.$M+a);if(h===T)return this.set(T,this.$y+a);if(h===v)return P(1);if(h===C)return P(7);var R=(s={},s[k]=t,s[x]=c,s[I]=f,s)[h]||1,L=this.$d.getTime()+a*R;return o.w(L,this)},i.subtract=function(a,m){return this.add(-1*a,m)},i.format=function(a){var m=this,s=this.$locale();if(!this.isValid())return s.invalidDate||A;var g=a||"YYYY-MM-DDTHH:mm:ssZ",h=o.z(this),P=this.$H,R=this.$m,L=this.$M,H=s.weekdays,W=s.months,Z=function(E,j,he,fe){return E&&(E[j]||E(m,g))||he[j].slice(0,fe)},se=function(E){return o.s(P%12||12,E,"0")},re=s.meridiem||function(E,j,he){var fe=E<12?"AM":"PM";return he?fe.toLowerCase():fe},q={YY:String(this.$y).slice(-2),YYYY:this.$y,M:L+1,MM:o.s(L+1,2,"0"),MMM:Z(s.monthsShort,L,W,3),MMMM:Z(W,L),D:this.$D,DD:o.s(this.$D,2,"0"),d:String(this.$W),dd:Z(s.weekdaysMin,this.$W,H,2),ddd:Z(s.weekdaysShort,this.$W,H,3),dddd:H[this.$W],H:String(P),HH:o.s(P,2,"0"),h:se(1),hh:se(2),a:re(P,R,!0),A:re(P,R,!1),m:String(R),mm:o.s(R,2,"0"),s:String(this.$s),ss:o.s(this.$s,2,"0"),SSS:o.s(this.$ms,3,"0"),Z:h};return g.replace(Y,function(E,j){return j||q[E]||h.replace(":","")})},i.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},i.diff=function(a,m,s){var g,h=o.p(m),P=D(a),R=(P.utcOffset()-this.utcOffset())*t,L=this-P,H=o.m(this,P);return H=(g={},g[T]=H/12,g[_]=H,g[O]=H/3,g[C]=(L-R)/6048e5,g[v]=(L-R)/864e5,g[x]=L/c,g[k]=L/t,g[I]=L/f,g)[h]||L,s?H:o.a(H)},i.daysInMonth=function(){return this.endOf(_).$D},i.$locale=function(){return y[this.$L]},i.locale=function(a,m){if(!a)return this.$L;var s=this.clone(),g=B(a,m,!0);return g&&(s.$L=g),s},i.clone=function(){return o.w(this.$d,this)},i.toDate=function(){return new Date(this.valueOf())},i.toJSON=function(){return this.isValid()?this.toISOString():null},i.toISOString=function(){return this.$d.toISOString()},i.toString=function(){return this.$d.toUTCString()},r}(),M=$.prototype;return D.prototype=M,[["$ms",S],["$s",I],["$m",k],["$H",x],["$W",v],["$M",_],["$y",T],["$D",z]].forEach(function(r){M[r[1]]=function(i){return this.$g(i,r[0],r[1])}}),D.extend=function(r,i){return r.$i||(r(i,$,D),r.$i=!0),D},D.locale=B,D.isDayjs=b,D.unix=function(r){return D(1e3*r)},D.en=y[u],D.Ls=y,D.p={},D})})(Nt);const ze=_e;const Zt={class:"home text-center"},Wt={class:"upload-box"},jt=te("p",{class:"mg10"},"请上传音频文件：",-1),Xt={key:0,class:"audio-resouse"},Gt=["src"],Jt=["src"],ln={__name:"AudioView",setup(e){const l=V(""),f=V(null),t=V(""),c=V(""),S=V([]),I=V(""),k=V(null),x=V(null);Ce(()=>{v()});const v=()=>{l.value=ze().format("YYYY-MM-DD HH:mm:ss"),f.value=setInterval(()=>{l.value=ze().format("YYYY-MM-DD HH:mm:ss")},1e3)},C=()=>{Ct({title:"下载提示",message:"确实要下载吗？下载后请前往文件目录查看！！！"}).then(()=>{Oe("下载");const n=S.value[0];_(n.file)}).catch(()=>{Oe("取消下载")})},_=async n=>{if(n){const u=new Blob([n]),y=window.URL.createObjectURL(u),b=document.createElement("a");b.href=y,b.setAttribute("download",n.name),document.body.appendChild(b),b.click(),window.URL.revokeObjectURL(y),document.body.removeChild(b);return}},O=n=>(console.log(n,"file上传中"),n.status="uploading",n.message="上传中...",!0),T=n=>{console.log(n,"file上传成功"),c.value=n.file.name,t.value=URL.createObjectURL(n.file),Y(n.file)},z=n=>{console.log(n,"file上传成功"),c.value="",t.value="",S.value=[]},A=new(window.AudioContext||window.webkitAudioContext),w=V(null);V(null);const Y=n=>{if(!n)return;const u=new FileReader;u.onload=y=>{const b=y.target.result;p(b)},u.readAsArrayBuffer(n)},p=(n,u)=>{A.decodeAudioData(n,y=>{w.value=y})},F=(n,u)=>{if(!w.value)return;const y=A.createBufferSource();y.buffer=w.value;const b=u-n;y.start(A.currentTime,n,b),A.createMediaStreamDestination(),console.log(A,"audioContext"),y.connect(A.destination)};return xe(()=>{clearInterval(f)}),(n,u)=>{const y=ht,b=Vt,B=dt,D=ut,o=yt;return ke(),Te("div",Zt,[d(y,{"left-icon":"volume-o",text:`当前时间：${l.value}`},null,8,["text"]),te("div",Wt,[jt,d(b,{modelValue:S.value,"onUpdate:modelValue":u[0]||(u[0]=$=>S.value=$),"max-count":1,"before-read":O,"after-read":T,"before-delete":z,accept:"audio/mp3"},null,8,["modelValue"])]),t.value?(ke(),Te("div",Xt,[te("span",null,lt(c.value),1),te("audio",{src:t.value,controls:"",autoplay:!1},null,8,Gt),d(D,{inset:""},{default:ye(()=>[d(B,{modelValue:k.value,"onUpdate:modelValue":u[1]||(u[1]=$=>k.value=$),type:"number",colon:"",placeholder:"请输入开始时间",label:"开始时间/秒"},null,8,["modelValue"]),d(B,{modelValue:x.value,"onUpdate:modelValue":u[2]||(u[2]=$=>x.value=$),type:"number",colon:"",placeholder:"请输入结束时间",label:"结束时间/秒"},null,8,["modelValue"])]),_:1}),d(o,{type:"success",onClick:u[3]||(u[3]=$=>F(k.value,x.value))},{default:ye(()=>[$e("截取片段")]),_:1}),te("p",null,[$e(" 试听： "),te("audio",{src:I.value,controls:"",autoplay:"false"},null,8,Jt)]),d(o,{type:"success",onClick:C},{default:ye(()=>[$e("下载")]),_:1})])):ct("",!0)])}}};export{ln as default};
