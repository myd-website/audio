import{c as F,d as H,r as L,az as Ce,ac as le,t as E,h as v,q as D,s as se,at as xe,aA as Se,ae as ce,a as C,j,B as U,v as q,w as p,D as Te,E as Pe,aB as ke,f as re,ao as $e,a1 as Ae,aj as Ee,o as _e,x as De,a4 as K,an as ae,n as ue,y as Oe,z as W,C as ze,m as Ie,p as Re,F as Me,b as pe,aC as Fe,aD as ne,M as He,aE as Ke,aF as Ne,J as Ye}from"./index.js";import{a as Le,b as Xe,p as Ue,c as We,P as je}from"./function-call.js";import{u as J}from"./use-expose.js";import{B as V}from"./index9.js";const[de,oe]=F("action-bar"),fe=Symbol(de),Ve={placeholder:Boolean,safeAreaInsetBottom:E};var qe=H({name:de,props:Ve,setup(e,{slots:h}){const s=L(),c=Ce(s,oe),{linkChildren:l}=le(fe);l();const t=()=>{var w;return v("div",{ref:s,class:[oe(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(w=h.default)==null?void 0:w.call(h)])};return()=>e.placeholder?c(t):t()}});const Je=D(qe),[Ge,Qe]=F("action-bar-button"),Ze=se({},xe,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var et=H({name:Ge,props:Ze,setup(e,{slots:h}){const s=Se(),{parent:c,index:l}=ce(fe),t=C(()=>{if(c){const i=c.children[l.value-1];return!(i&&"isButton"in i)}}),w=C(()=>{if(c){const i=c.children[l.value+1];return!(i&&"isButton"in i)}});return J({isButton:!0}),()=>{const{type:i,icon:B,text:u,color:n,loading:d,disabled:g}=e;return v(V,{class:Qe([i,{last:w.value,first:t.value}]),size:"large",type:i,icon:B,color:n,loading:d,disabled:g,onClick:s},{default:()=>[h.default?h.default():u]})}}});const ie=D(et),[ve,N]=F("swipe"),tt={loop:E,width:j,height:j,vertical:Boolean,autoplay:U(0),duration:U(500),touchable:E,lazyRender:Boolean,initialSwipe:U(0),indicatorColor:String,showIndicators:E,stopPropagation:E},he=Symbol(ve);var at=H({name:ve,props:tt,emits:["change","dragStart","dragEnd"],setup(e,{emit:h,slots:s}){const c=L(),l=L(),t=q({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let w=!1;const i=Le(),{children:B,linkChildren:u}=le(he),n=C(()=>B.length),d=C(()=>t[e.vertical?"height":"width"]),g=C(()=>e.vertical?i.deltaY.value:i.deltaX.value),k=C(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-d.value*n.value:0),O=C(()=>d.value?Math.ceil(Math.abs(k.value)/d.value):n.value),z=C(()=>n.value*d.value),$=C(()=>(t.active+n.value)%n.value),o=C(()=>{const a=e.vertical?"vertical":"horizontal";return i.direction.value===a}),m=C(()=>{const a={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${t.offset}px)`};if(d.value){const f=e.vertical?"height":"width",r=e.vertical?"width":"height";a[f]=`${z.value}px`,a[r]=e[r]?`${e[r]}px`:""}return a}),P=a=>{const{active:f}=t;return a?e.loop?W(f+a,-1,n.value):W(f+a,0,O.value):f},S=(a,f=0)=>{let r=a*d.value;e.loop||(r=Math.min(r,-k.value));let x=f-r;return e.loop||(x=W(x,k.value,0)),x},b=({pace:a=0,offset:f=0,emitChange:r})=>{if(n.value<=1)return;const{active:x}=t,y=P(a),M=S(y,f);if(e.loop){if(B[0]&&M!==k.value){const X=M<k.value;B[0].setOffset(X?z.value:0)}if(B[n.value-1]&&M!==0){const X=M>0;B[n.value-1].setOffset(X?-z.value:0)}}t.active=y,t.offset=M,r&&y!==x&&h("change",$.value)},A=()=>{t.swiping=!0,t.active<=-1?b({pace:n.value}):t.active>=n.value&&b({pace:-n.value})},ge=()=>{A(),i.reset(),K(()=>{t.swiping=!1,b({pace:-1,emitChange:!0})})},G=()=>{A(),i.reset(),K(()=>{t.swiping=!1,b({pace:1,emitChange:!0})})};let Q;const I=()=>clearTimeout(Q),R=()=>{I(),+e.autoplay>0&&n.value>1&&(Q=setTimeout(()=>{G(),R()},+e.autoplay))},_=(a=+e.initialSwipe)=>{if(!c.value)return;const f=()=>{var r,x;if(!ae(c)){const y={width:c.value.offsetWidth,height:c.value.offsetHeight};t.rect=y,t.width=+((r=e.width)!=null?r:y.width),t.height=+((x=e.height)!=null?x:y.height)}n.value&&(a=Math.min(n.value-1,a),a===-1&&(a=n.value-1)),t.active=a,t.swiping=!0,t.offset=S(a),B.forEach(y=>{y.setOffset(0)}),R()};ae(c)?ue().then(f):f()},Z=()=>_(t.active);let ee;const me=a=>{!e.touchable||a.touches.length>1||(i.start(a),w=!1,ee=Date.now(),I(),A())},we=a=>{e.touchable&&t.swiping&&(i.move(a),o.value&&(!e.loop&&(t.active===0&&g.value>0||t.active===n.value-1&&g.value<0)||(Oe(a,e.stopPropagation),b({offset:g.value}),w||(h("dragStart",{index:$.value}),w=!0))))},te=()=>{if(!e.touchable||!t.swiping)return;const a=Date.now()-ee,f=g.value/a;if((Math.abs(f)>.25||Math.abs(g.value)>d.value/2)&&o.value){const x=e.vertical?i.offsetY.value:i.offsetX.value;let y=0;e.loop?y=x>0?g.value>0?-1:1:0:y=-Math[g.value>0?"ceil":"floor"](g.value/d.value),b({pace:y,emitChange:!0})}else g.value&&b({pace:0});w=!1,t.swiping=!1,h("dragEnd",{index:$.value}),R()},Be=(a,f={})=>{A(),i.reset(),K(()=>{let r;e.loop&&a===n.value?r=t.active===0?0:a:r=a%n.value,f.immediate?K(()=>{t.swiping=!1}):t.swiping=!1,b({pace:r-t.active,emitChange:!0})})},be=(a,f)=>{const r=f===$.value,x=r?{backgroundColor:e.indicatorColor}:void 0;return v("i",{style:x,class:N("indicator",{active:r})},null)},ye=()=>{if(s.indicator)return s.indicator({active:$.value,total:n.value});if(e.showIndicators&&n.value>1)return v("div",{class:N("indicators",{vertical:e.vertical})},[Array(n.value).fill("").map(be)])};return J({prev:ge,next:G,state:t,resize:Z,swipeTo:Be}),u({size:d,props:e,count:n,activeIndicator:$}),p(()=>e.initialSwipe,a=>_(+a)),p(n,()=>_(t.active)),p(()=>e.autoplay,R),p([Te,Pe,()=>e.width,()=>e.height],Z),p(ke(),a=>{a==="visible"?R():I()}),re(_),$e(()=>_(t.active)),Ae(()=>_(t.active)),Ee(I),_e(I),De("touchmove",we,{target:l}),()=>{var a;return v("div",{ref:c,class:N()},[v("div",{ref:l,style:m.value,class:N("track",{vertical:e.vertical}),onTouchstartPassive:me,onTouchend:te,onTouchcancel:te},[(a=s.default)==null?void 0:a.call(s)]),ye()])}}});const ht=D(at),[nt,ot]=F("swipe-item");var it=H({name:nt,setup(e,{slots:h}){let s;const c=q({offset:0,inited:!1,mounted:!1}),{parent:l,index:t}=ce(he);if(!l)return;const w=C(()=>{const u={},{vertical:n}=l.props;return l.size.value&&(u[n?"height":"width"]=`${l.size.value}px`),c.offset&&(u.transform=`translate${n?"Y":"X"}(${c.offset}px)`),u}),i=C(()=>{const{loop:u,lazyRender:n}=l.props;if(!n||s)return!0;if(!c.mounted)return!1;const d=l.activeIndicator.value,g=l.count.value-1,k=d===0&&u?g:d-1,O=d===g&&u?0:d+1;return s=t.value===d||t.value===k||t.value===O,s}),B=u=>{c.offset=u};return re(()=>{ue(()=>{c.mounted=!0})}),J({setOffset:B}),()=>{var u;return v("div",{class:ot(),style:w.value},[i.value?(u=h.default)==null?void 0:u.call(h):null])}}});const gt=D(it),mt=D(Xe),[lt,T,Y]=F("dialog"),st=se({},Ue,{title:String,theme:String,width:j,message:[String,Function],callback:Function,allowHtml:Boolean,className:ze,transition:Ie("van-dialog-bounce"),messageAlign:String,closeOnPopstate:E,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:E,closeOnClickOverlay:Boolean}),ct=[...We,"transition","closeOnPopstate"];var rt=H({name:lt,props:st,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:h,slots:s}){const c=L(),l=q({confirm:!1,cancel:!1}),t=o=>h("update:show",o),w=o=>{var m;t(!1),(m=e.callback)==null||m.call(e,o)},i=o=>()=>{e.show&&(h(o),e.beforeClose?(l[o]=!0,Ye(e.beforeClose,{args:[o],done(){w(o),l[o]=!1},canceled(){l[o]=!1}})):w(o))},B=i("cancel"),u=i("confirm"),n=Fe(o=>{var m,P;if(o.target!==((P=(m=c.value)==null?void 0:m.popupRef)==null?void 0:P.value))return;({Enter:e.showConfirmButton?u:ne,Escape:e.showCancelButton?B:ne})[o.key](),h("keydown",o)},["enter","esc"]),d=()=>{const o=s.title?s.title():e.title;if(o)return v("div",{class:T("header",{isolated:!e.message&&!s.default})},[o])},g=o=>{const{message:m,allowHtml:P,messageAlign:S}=e,b=T("message",{"has-title":o,[S]:S}),A=He(m)?m():m;return P&&typeof A=="string"?v("div",{class:b,innerHTML:A},null):v("div",{class:b},[A])},k=()=>{if(s.default)return v("div",{class:T("content")},[s.default()]);const{title:o,message:m,allowHtml:P}=e;if(m){const S=!!(o||s.title);return v("div",{key:P?1:0,class:T("content",{isolated:!S})},[g(S)])}},O=()=>v("div",{class:[Ne,T("footer")]},[e.showCancelButton&&v(V,{size:"large",text:e.cancelButtonText||Y("cancel"),class:T("cancel"),style:{color:e.cancelButtonColor},loading:l.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&v(V,{size:"large",text:e.confirmButtonText||Y("confirm"),class:[T("confirm"),{[Ke]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:l.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]),z=()=>v(Je,{class:T("footer")},{default:()=>[e.showCancelButton&&v(ie,{type:"warning",text:e.cancelButtonText||Y("cancel"),class:T("cancel"),color:e.cancelButtonColor,loading:l.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&v(ie,{type:"danger",text:e.confirmButtonText||Y("confirm"),class:T("confirm"),color:e.confirmButtonColor,loading:l.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]}),$=()=>s.footer?s.footer():e.theme==="round-button"?z():O();return()=>{const{width:o,title:m,theme:P,message:S,className:b}=e;return v(je,Re({ref:c,role:"dialog",class:[T([P]),b],style:{width:pe(o)},tabindex:0,"aria-labelledby":m||S,onKeydown:n,"onUpdate:show":t},Me(e,ct)),{default:()=>[d(),k(),$()]})}}});const wt=D(rt);export{wt as D,gt as S,mt as T,ht as a,rt as s};
