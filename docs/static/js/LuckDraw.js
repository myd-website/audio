import{d as N,r as _,a as f,b as S,o as B,v as A,a1 as t,a2 as l,a3 as s,aa as p,ab as w,ah as g,a4 as k,ai as C,a0 as M}from"./index.js";import{s as $}from"./function-call.js";import"./use-expose.js";import"./index8.js";const J={class:"luckdraw-content"},O={class:"luckdraw-scroll"},R={class:"bg-scroll"},V={class:"lkq-name"},q={class:"turntable"},z={class:"awards-list"},E={key:1},b=200,I=20,F=2.5,j=5,G=N({name:"LuckDraw",__name:"LuckDraw",setup(H){let i=0,e,u=0,v=!1;const m=_(!1),n=_(0),o=f([{classmate:"赵同学抽中荧光笔一盒"},{classmate:"钱同学抽中便利贴一包"},{classmate:"孙同学抽中钥匙链一个"},{classmate:"李同学抽中徽章一枚"},{classmate:"周同学抽中漫画一册"},{classmate:"吴同学抽中游乐园门票一张"},{classmate:"郑同学抽中电影票一张"},{classmate:"王同学抽中便利贴一包"}]),y=f([{id:1,runId:0,name:"荧光笔一盒"},{id:2,runId:1,name:"便利贴一包"},{id:3,runId:2,name:"钥匙链一个"},{id:4,runId:3,name:"徽章一枚"},{id:5,runId:4,name:"漫画一册"},{id:6,runId:5,name:"游乐园门票一张"},{id:7,runId:6,name:"电影票一张"},{id:8,runId:7,name:"谢谢参与"}]),h=S(()=>{const r=JSON.parse(JSON.stringify(y));return r.splice(4,0,{name:"drawBtn"}),r}),T=()=>{m.value=!0,setTimeout(()=>{o.push(o[0]),o.shift(),m.value=!1},500)},x=()=>{const r=setTimeout(()=>{if(n.value++,n.value>7&&(n.value=0),e!=null&&e.id&&(Date.now()-u)/1e3>F){if(console.log("奖品出来了"),i+=I,(Date.now()-u)/1e3>j&&e.runId===n.value){clearTimeout(r),setTimeout(()=>{v=!1;const c=y.find(a=>a.id===e.id);c&&(console.log(`您抽中的奖品是${c.name},奖品id是${c.id}`),$(`您抽中的奖品是${c.name}`))},400);return}}else i>=50&&(i-=I);x()},i)},D=()=>{setTimeout(()=>{const r=Math.ceil(Math.random()*8),c=y.find(a=>a.id===r);c&&(e=c),console.log("返回的抽奖结果是",e)},2e3),x()},L=()=>{if(v){console.log("正在抽奖中...");return}if(isNaN(Number(b)))return!1;i=b,v=!0,u=Date.now(),D(),console.log("开始抽奖")};return B(async()=>{await A(),setInterval(T,2e3)}),(r,c)=>(t(),l("div",J,[s("div",O,[s("ul",R,[(t(!0),l(p,null,w(o,(a,d)=>(t(),l("li",{key:d,class:g({anim:m.value&&d==0})},[s("span",V,k(a.classmate),1)],2))),128))])]),s("div",q,[c[1]||(c[1]=C('<svg class="bulb svelte-ecndpu" viewBox="-6 -6 316 316" fill="currentColor" fill-rule="evenodd" data-v-ea17a0c5><g class="bulb-1 svelte-ecndpu" data-v-ea17a0c5><circle cx="10" cy="10" r="4" data-v-ea17a0c5></circle><circle cx="78" cy="4" r="4" data-v-ea17a0c5></circle><circle cx="152" cy="4" r="4" data-v-ea17a0c5></circle><circle cx="226" cy="4" r="4" data-v-ea17a0c5></circle><circle cx="294" cy="10" r="4" data-v-ea17a0c5></circle><circle cx="4" cy="89" r="4" data-v-ea17a0c5></circle><circle cx="4" cy="173" r="4" data-v-ea17a0c5></circle><circle cx="4" cy="258" r="4" data-v-ea17a0c5></circle><circle cx="41" cy="300" r="4" data-v-ea17a0c5></circle><circle cx="115" cy="300" r="4" data-v-ea17a0c5></circle><circle cx="189" cy="300" r="4" data-v-ea17a0c5></circle><circle cx="263" cy="300" r="4" data-v-ea17a0c5></circle><circle cx="300" cy="258" r="4" data-v-ea17a0c5></circle><circle cx="300" cy="173" r="4" data-v-ea17a0c5></circle><circle cx="300" cy="89" r="4" data-v-ea17a0c5></circle></g><g class="bulb-2 svelte-ecndpu" data-v-ea17a0c5><circle cx="41" cy="4" r="4" data-v-ea17a0c5></circle><circle cx="115" cy="4" r="4" data-v-ea17a0c5></circle><circle cx="189" cy="4" r="4" data-v-ea17a0c5></circle><circle cx="263" cy="4" r="4" data-v-ea17a0c5></circle><circle cx="4" cy="46" r="4" data-v-ea17a0c5></circle><circle cx="4" cy="131" r="4" data-v-ea17a0c5></circle><circle cx="4" cy="215" r="4" data-v-ea17a0c5></circle><circle cx="10" cy="294" r="4" data-v-ea17a0c5></circle><circle cx="294" cy="294" r="4" data-v-ea17a0c5></circle><circle cx="300" cy="215" r="4" data-v-ea17a0c5></circle><circle cx="300" cy="131" r="4" data-v-ea17a0c5></circle><circle cx="300" cy="46" r="4" data-v-ea17a0c5></circle><circle cx="78" cy="300" r="4" data-v-ea17a0c5></circle><circle cx="152" cy="300" r="4" data-v-ea17a0c5></circle><circle cx="226" cy="300" r="4" data-v-ea17a0c5></circle></g></svg>',1)),s("ul",z,[(t(!0),l(p,null,w(h.value,(a,d)=>(t(),l("li",{key:a.id,class:g(["awards-item",{"awards-item-draw":d===4,"run-item":a.runId===n.value}])},[d===4?(t(),l("div",{key:0,onClick:L,class:"draw-btn svelte-ecndpu"},c[0]||(c[0]=[s("span",{class:"draw-btn-text"},"点击抽奖",-1)]))):(t(),l("div",E,k(a.name),1))],2))),128))])])]))}});const W=M(G,[["__scopeId","data-v-ea17a0c5"]]);export{W as default};
